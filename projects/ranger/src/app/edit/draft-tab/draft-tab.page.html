<ion-header>
  <ion-toolbar>
    <ion-title>Editing: {{attraction && attraction.name}}</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="save()">
        <ion-icon slot="end" name="arrow-up"></ion-icon>
      </ion-button>
      <cr-connection-state></cr-connection-state>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

<ion-content *ngIf="attraction">
  <ion-list>

    <!-- Name -->
    <ion-item>
        <ion-label position="floating">
          Name
        </ion-label>
        <ion-input class="value-field"
                   [(ngModel)]="attraction.name">
        </ion-input>
    </ion-item>

    <!-- Category -->
    <ion-item>
      <ion-label position="floating">
        Category
      </ion-label>
      <ion-select class="value-field"
                  interface="popover"
                  (ionChange)="categoryHasChanged($event)"
                  [compareWith]="compareCategory"
                  [selectedText]="selectedCategory && selectedCategory.name"
                  [(ngModel)]="selectedCategory">
        <ion-select-option
          *ngFor="let category of categories"
          [value]="category"
        >
          {{category.name}}
       </ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Type -->
    <ion-item>
        <ion-label position="floating">
          Type
        </ion-label>
        <ion-select class="value-field"
                    interface="popover"
                    [compareWith]="compareLocType"
                    [selectedText]="locTypeSelectedText()"
                    [(ngModel)]="attraction.locationTypeId">
          <ion-select-option
            *ngFor="let locType of offeredLocTypes"
            [value]="locType.id"
          >
            {{locType.name}}
          </ion-select-option>
        </ion-select>
    </ion-item>

    <!-- Main Link Location -->
    <ion-item>
        <ion-label position="floating">
          Main Link
        </ion-label>
        <ion-textarea
          class="value-field"
          placeholder="https://some-link.com/..."
          [(ngModel)]="attraction.mainLink.link">
        </ion-textarea>
    </ion-item>

    <!-- Description -->
    <ion-item>
        <ion-label position="floating">
          Description
        </ion-label>
        <ion-textarea class="value-field" [(ngModel)]="attraction.description"></ion-textarea>
    </ion-item>

    <!-- Button Footer -->
    <ion-item>
      <ion-button color="danger"
                  slot="start"
                  (click)="deleteAttraction()">
        Delete
      </ion-button>

      <app-flag-count-chip slot="end"
                           [attractionId]="attraction.id"
                           [flags]="attraction.flags">

      </app-flag-count-chip>

      <app-flag-button slot="end" [attractionId]="attraction.id"></app-flag-button>
    </ion-item>

  </ion-list>


</ion-content>
